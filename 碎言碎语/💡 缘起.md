## 动机
{: id="20201231085802-y458poy"}

在选择了很长一段时间的笔记应用后我发现，市面上还没有任何一款笔记应用能同时满足这两个需求：
{: id="20201231085802-73jag64"}

* {: id="20201231085802-c5lxlj0"}支持标准 Markdown，支持即时渲染。分屏预览带来的割裂感让我难以将注意力完全集中在内容创作上
* {: id="20201231085802-2taweue"}支持块级引用和双向链接。通过块链我可以更高效地发现和整理已有内容，形成知识体系且方便排版输出
{: id="20201231085802-gwlehbh"}

这两个需求拆分开来都有现成的产品能够实现，可一旦结合就没有好用的产品了。既然没有，那就创造一个吧。
{: id="20201231085802-b47frkw"}

## 存储格式
{: id="20200822124602-wx0kvpc"}

Markdown 的成功除了语法简洁之外，很大一个因素是因为它是一种开放的纯文本格式，使用普通的文本编辑器就可以打开查看和编辑。但随着 Markdown 用户的增多，更多的“高阶”需求逐渐浮出，为了满足这些需求，有不少项目在 Markdown 基础语法的基础上设计了扩展语法。
{: id="20201231085802-yd2t9qh"}

经过一段时间的调研和尝试，我们确认了使用标准 Markdown 语法（CommonMark/GFM）是无法实现块级引用的，必须引入扩展语法。在众多的 Markdown 扩展语法中，我们选择了 [kramdown](https://kramdown.gettalong.org) 提供的内联属性列表（[Inline Attribute Lists](https://kramdown.gettalong.org/syntax.html#inline-attribute-lists)）语法给块级元素做标识，让每个块级元素都拥有唯一的 ID。这样在引用的时候就能精确地获取到该块。保持 Markdown 文本人类易读写的前提下最大限度地实现通用性和互操作性。
{: id="20201231085802-px0a5cw"}

目前并没有太多平台支持 kramdown 扩展语法，如果需要将笔记内容发布到其他平台上，可以通过导出功能来导出标准的 Markdown 文件。
{: id="20201231085802-iuswj9i"}

## 本地离线
{: id="20201231085802-1luhs57"}

笔记应用应该是完全支持离线使用的，只有这样才能保证在最大程度上的可用。在数据同步需求上，已经有很多优秀的解决方案，比如各式各样的云盘服务。
{: id="20201231085802-imi7hqw"}

笔记可以说是我们一生的知识积累。从可用性和安全性的角度，在几十年的时间跨度上，没有任何一款云笔记能够保障持续可用，本地文件的可用性是远远大于在线应用的。本地文件只要做好备份（可以定时拷贝到其他离线的存储设备上，也可以通过云盘），基本不会丢失和泄露。云笔记就不一样了，有非常多的可能性导致数据丢失或者泄露，想要通过其他机制做备份也基本不现实。可以说云笔记中的数据是不受用户自己掌控的。
{: id="20201231085802-hmfif4g"}

使用云笔记的唯一优势是方便分享，但作为个人知识管理工具来说，分享并不是刚需，或者说并不是高频需求。综上，我们的结论是：**无离线，不笔记**。
{: id="20201231085802-gtg30a2"}

## 拥抱开源
{: id="20201231085802-z6ly9zo"}

数据可以完全离线以后，还剩下最后一个问题：软件生命周期。
{: id="20201231085802-x4g6ll6"}

没有任何软件开发团队能保证软件能够持续可用，从开发团队来说，发生软件终止维护的可能性太多了，比如：经费不足、研发目标转移或者遇到不可抗力（比如开发人员突然离世）。
{: id="20201231085802-ei8v9kk"}

有一种有效的方法可以在最大限度上解决软件停更造成的不可迁移，那就是**开源**。如果软件有足够价值且是完整开源的，即使主创团队无法继续维护了，其他开发者也能接过重任。从开发团队实际情况出发，完全开源是比较难办到的，虽然开源商业化模式在很多项目上已经大获成功，但并不是每一个项目都适合这样做或者说需要等待适合的时机。
{: id="20201231085802-ncfkz7q"}


{: id="20200822105834-rs7lzzm" type="doc"}
