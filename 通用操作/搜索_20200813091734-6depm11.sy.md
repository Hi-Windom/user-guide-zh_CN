## 搜索功能

搜索主要涉及三个功能点：

* 全局文本搜索，通过 <kbd>Ctrl P</kbd> / <kbd>⌘ P</kbd> 触发搜索框
* 内容块引用/嵌入搜索，在编辑器文档时通过输入 `((关键字` 触发
* 关系图搜索，在关系图中根据关键字筛选过滤节点和连接

## 类型过滤

搜索关键字如果以如下字符开头，则启用类型过滤。

* `d` 文档块
* `#` 标题块
* `*` 列表块（包含有序列表块、无序列表块和任务列表块）
* `-` 列表项块
* `` ` `` 代码块
* `>` 块引用块
* `$` 数学公式块
* `p` 段落块

比如想要搜索所有包含 `Markdown` 的标题块，则可以使用 `#Markdown` 作为搜索条件。

## 给极客准备的...

全局文本搜索支持：

* 正则表达式
* SQL

对于 SQL 搜索，使用内置 SQLite 数据库（系统临时文件夹/siyuan/siyuan.db）实现。

### `blocks` 表

该表用于存储内容块数据。

|   字段 | 类型 | 说明                      |
| -------: | :-----: | --------------------------- |
|       id | integer | 自增主键                |
| block_id |  text  | 内容块 ID                |
|      box |  text  | 笔记本名                |
|     path |  text  | 内容块所在文档路径 |
|  tree_id |  text  | AST ID                      |
|  content |  text  | 内容块 Markdown          |
