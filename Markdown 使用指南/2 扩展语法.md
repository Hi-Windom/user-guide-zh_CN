> 本文主要介绍 Markdown 的扩展语法，Markdown 基础语法请参考((20200824155152-to2u79e "这里"))。
> 简洁版语法可浏览((20200824155434-it5vq23 "速查手册"))。
> {: id="20210104091224-hn09um4"}
{: id="20210104091224-awincx5"}

## 总览
{: id="20210104091224-uuoww0y"}

在[基础语法](https://ld246.com/article/1583129520165)中我们介绍了 Markdown 最常用的排版用法，但有些时候基础语法不足以满足复杂一些的排版需求，这时候就需要使用扩展语法了。
{: id="20210104091224-5x8x2mw"}

一些个人和组织对基础语法进行了扩展，比如引入表格、围栏代码块、代码高亮、自动链接、脚注和目录等，这些扩展语法需要特定的 Markdown 引擎来支持。
{: id="20210104091224-kt311j7"}

## 可用性
{: id="20210104091224-gynzy5s"}

不是所有的 Markdown 引擎都支持扩展语法，所以在使用扩展语法之前，你可能需要对具体的 Markdown 引擎支持情况进行确认，通过浏览它们的使用文档来了解具体哪些元素可以得到支持。
{: id="20210104091224-lrbpynl"}

### 主流的 Markdown 语法规范
{: id="20210104091224-np3dkbi"}

Markdown 语法规范目前尚未形成标准，如下列出的几种语法规范较为主流。
{: id="20210104091224-hdtsil1"}

* {: id="20210104091224-jh1bpvu"}[CommonMark](https://commonmark.org)
* {: id="20210104091224-o7gcozn"}[GitHub Flavored Markdown (GFM)](https://github.github.com/gfm)
* {: id="20210104091224-j925f8y"}[Markdown Extra](https://michelf.ca/projects/php-markdown/extra)
* {: id="20210104091224-z26zq82"}[MultiMarkdown](https://fletcherpenney.net/multimarkdown)
* {: id="20210104091224-tra455r"}[R Markdown](https://rmarkdown.rstudio.com)
{: id="20210104091224-25qzjgh"}

其中 CommonMark 和 GFM 是目前最有可能进行标准化的。GFM 是 GitHub 基于 CommonMark 进行的扩展，它几乎已经是事实标准了，关于 CommonMark 规范要点解读可参考[这里](https://ld246.com/article/1566893557720)。
{: id="20210104091224-w64a6ry"}

### Markdown 引擎
{: id="20210104091224-noaud8o"}

[这里](https://github.com/markdown/markdown.github.com/wiki/Implementations)列出了很多 Markdown 引擎实现，它们中的大多数都支持通过设置开关来都支持扩展语法，具体细节请参考它们的文档。
{: id="20210104091224-f2couxh"}

## 表格
{: id="20210104091224-5e6zaxm"}

使用短横线 `---` 来分隔表头和表身，使用竖线 `|` 来分隔列，每行开头和结尾的竖线是可选的。
{: id="20210104091224-yljmem6"}

```markdown
| Syntax      | Description |
| ----------- | ----------- |
| Header      | Title       |
| Paragraph   | Text        |
```
{: id="20210104091224-2f2eeny"}

渲染结果：
{: id="20210104091224-t5d3i5k"}

| Syntax    | Description |
| ----------- | ------------- |
| Header    | Title       |
| Paragraph | Text        |
{: id="20210104091224-mlt22wh"}

每个列不一定要对齐，如下示例同样能够渲染：
{: id="20210104091224-9hckwj7"}

```markdown
| Syntax | Description |
| --- | ----------- |
| Header | Title |
| Paragraph | Text |
```
{: id="20210104091224-y1fld7j"}

### 表格对齐
{: id="20210104091224-t3dl00m"}

如果需要左对齐、居中对齐或者右对齐表格内容，可以通过在 `---` 中添加冒号 `:` 实现。冒号仅出现在左边表示左对齐，出现在两边表示居中对齐，仅出现在右边表示右对齐。
{: id="20210104091224-wu1axa6"}

```markdown
| Syntax      | Description | Test Text     |
| :---        |    :----:   |          ---: |
| Header      | Title       | Here's this   |
| Paragraph   | Text        | And more      |
```
{: id="20210104091224-jxff70g"}

渲染结果：
{: id="20210104091224-vmd13fu"}

| Syntax    | Description |   Test Text |
| :---------- | :-----------: | ------------: |
| Header    |    Title    | Here's this |
| Paragraph |    Text    |    And more |
{: id="20210104091224-j3se6y7"}

### 表格内容排版
{: id="20210104091224-8adlmh0"}

表格中的内容也可以进行排版，比如加粗、强调文本，插入超链接等。但仅限于使用“行级元素”进行排版，不能使用“块级元素”，比如不能使用标题、块引用、列表、分隔线等。
{: id="20210104091224-74rexwd"}

### 表格内容转义竖线
{: id="20210104091224-ntbow2a"}

如果需要在表格内容中使用竖线 `|`，那就需要对其进行转义。可以使用 `\|` 转义，但更稳妥的做法是写竖线的 HTML 实体表示 `&#124;`，因为有的 Markdown 引擎不能正确处理表格内容中的 `\|`。
{: id="20210104091224-ibjlrfq"}

## 围栏代码块
{: id="20210104091224-dvnbn1t"}

在[基础语法](https://ld246.com/article/1583129520165)中我们介绍过可以通过四个空格或者制表符 `\t` 缩进来排版代码块。但我们更推荐的是使用围栏代码块语法，即使用大于等于三个反引号 span</code> 或者大于等于三个波浪线 `~~~` 来包裹代码块内容：
{: id="20210104091224-7i93xbo"}

````markdown
```
{
  "firstName": "John",
  "lastName": "Smith",
  "age": 25
}
```
````
{: id="20210104091224-l7ekzsq"}

渲染结果：
{: id="20210104091224-sh6wlk0"}

```text
{
  "firstName": "John",
  "lastName": "Smith",
  "age": 25
}
```
{: id="20210104091224-9awh6yu"}

如果需要展示代码块原文 Markdown（就像上面展示的例子那样），可以在最外层使用更多数量的反引号开始，闭合的反引号数量等于开始的数量即可。
{: id="20210104091224-n374c7c"}

``````markdown
````
```
{
  "firstName": "John",
  "lastName": "Smith",
  "age": 25
}
```
````
``````
{: id="20210104091224-kz4kc52"}

### 代码块语法高亮
{: id="20210104091224-mwk5wks"}

代码块语法高亮需要 Markdown 引擎支持，通过在开始反引号后添加编程语言名称来排版。
{: id="20210104091224-u0r5819"}

````markdown
```json
{
  "firstName": "John",
  "lastName": "Smith",
  "age": 25
}
```
````
{: id="20210104091224-qic42oy"}

渲染结果：
{: id="20210104091224-hkv0r8r"}

```json
{
  "firstName": "John",
  "lastName": "Smith",
  "age": 25
}
```
{: id="20210104091224-ayl9qvc"}

## 脚注
{: id="20210104091224-c57lyrq"}

脚注用于在文末添加细节说明或者参考，这样文章的正文部分看上去会更加简洁清晰。创建脚注后，正文中引用脚注的地方会出现一个上标数字链接，读者点击后跳转到文末脚注定义的对应位置。
{: id="20210104091224-z59o12h"}

脚注引用通过 `[^标识符]` 创建，标识符部分可以是数字或者文本，但不能包含空格或者制表符。标识符仅用于关联引用和定义，在渲染时会自动根据脚注定义顺序进行数字递增渲染。不过这也不是绝对的，某些 Markdown 引擎也会将标识符部分用于渲染。
{: id="20210104091224-4qup51v"}

脚注定义使用 `[^标识符]:` 来创建，冒号后面就是需要添加的细节说明或者参考。脚注定义不一定非要放在整个 Markdown 文本的末尾，夹在段落、列表或者块引用之间也是可以工作的。
{: id="20210104091224-f9yvzva"}

```markdown
这里是一个脚注引用[^1]，这里是另一个脚注引用[^bignote]。

[^1]: 第一个脚注定义。
[^bignote]: 脚注定义可使用多段内容。

    缩进对齐的段落包含在这个脚注定义内。

    ```
    可以使用代码块。
    ```

    还有其他行级排版语法，比如**加粗**和[链接](https://b3log.org)。
```
{: id="20210104091224-vgdl5zi"}

## 标题指定 ID {#heading-ids}
{: id="20210104091224-0to1o2g"}

一些 Markdown 引擎支持为标题指定 ID，另一些 Markdown 引擎是自动添加 ID 的。标题 ID 的作用是允许其他地方通过锚点直接跳转到该标题。标题指定 ID 的语法是在标题后面通过花括号包裹 ID。
{: id="20210104091224-0j1oq4c"}

```markdown
### 这是一个标题 {#custom-id}
```
{: id="20210104091224-m374vo6"}

渲染的 HTML：
{: id="20210104091224-hgtbx51"}

```html
<h3 id="custom-id">这是一个标题</h3>
```
{: id="20210104091224-b8u0az6"}

### 链接到指定的标题
{: id="20210104091224-1e3sp86"}

可以通过超链接语法链接到文中的标题。
{: id="20210104091224-maoue5h"}

| Markdown                          | HTML                                         | 渲染结果                                                           |
| ----------------------------------- | ---------------------------------------------- | ------------------------------------------------------------------------ |
| `[标题指定 ID](#heading-ids)` | `<a href="#heading-ids">标题指定 ID</a>` | [标题指定 ID](https://ld246.com/article/1583305480675#heading-ids) |
{: id="20210104091224-4whb5sn"}

如果需要链接到其他页面的标题，需要写全链接路径，比如 `[标题指定 ID](https://ld246.com/article/1583305480675#heading-ids)`。
{: id="20210104091224-c71f5xh"}

## 删除线
{: id="20210104091224-qq953e2"}

可以通过删除线划掉文本，排版结果~就像这样~。创建删除线可以通过一个 `~` 或两个波浪线 `~~` 包裹待删除的文本。
{: id="20210104091224-tick01a"}

```
~~地球是平的。~~ 现在我们知道地球是圆的了。
```
{: id="20210104091224-al1a17w"}

渲染结果：
{: id="20210104091224-egkeuvb"}

~~地球是平的。~~ 现在我们知道地球是圆的了。
{: id="20210104091224-m6r9w67"}

## 任务列表
{: id="20210104091224-kx6atya"}

通过在普通列表项中添加 `[ ]` 或者 `[x]` 来渲染任务列表项。
{: id="20210104091224-54a7soq"}

```markdown
- [x] 待办事项一
- [ ] 待办事项二
- [ ] 待办事项三
```
{: id="20210104091224-8kfo7g8"}

渲染结果：
{: id="20210104091224-u90hf7f"}

- {: id="20210104091224-2c05gdp"}[X] 待办事项一
- {: id="20210104091224-1etx3yj"}[ ] 待办事项二
- {: id="20210104091224-qxbbxh2"}[ ] 待办事项三
{: id="20210104091224-2uupfj2"}

## Emoji 表情
{: id="20210104091224-oglqj8p"}

有两种方法使用 Emoji 表情：直接输入 Emoji 字符或者使用别名 `:smile:`。直接输入的话需要确认当前编辑器使用 UTF-8 编码。
{: id="20210104091224-rw4voa4"}

```markdown
今天天气真好 :sunny: 
花儿 🌻 对我笑
```
{: id="20210104091224-fe640sn"}

渲染结果：
{: id="20210104091224-iffja4a"}

今天天气真好 ☀️
花儿 🌻 对我笑
{: id="20210104091224-vx9qbo8"}

## 禁止自动链接
{: id="20210104091224-s6jbtxb"}

大部分 Markdown 引擎都是默认开启自动链接的，所以当我们想把一个链接渲染为纯文本时，需要把它变成代码：
{: id="20210104091224-f4fgy54"}

```markdown
`https://b3log.org`
```
{: id="20210104091224-58x27qg"}

渲染结果：
{: id="20210104091224-gp9tiwu"}

`https://b3log.org`
{: id="20210104091224-rhdnr55"}

## 总结
{: id="20210104091224-ri6xfvh"}

尽量仅使用 GFM 定义的扩展语法，这样能够最大限度得到众多 Markdown 引擎的支持，从而得到一致的渲染结果。
{: id="20210104091224-lky2n40"}

## 参考
{: id="20210104091224-haqzjuq"}

* {: id="20210104091224-djws1op"}[Markdown Guide](https://www.markdownguide.org)
* {: id="20210104091224-69jnufu"}[CommonMark Spec](https://spec.commonmark.org)
{: id="20210104091224-j18mhjj"}


{: id="20200824155346-y7ep6hk" type="doc"}
